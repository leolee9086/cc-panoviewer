# å…¨æ™¯å›¾æµè§ˆå™¨ (CC-PanoViewer)

ä¸€ä¸ªè‡ªåŒ…å«çš„å…¨æ™¯å›¾æŸ¥çœ‹å™¨ï¼ŒåŸºäºPannellumåº“æ„å»ºï¼Œæ”¯æŒå•æ–‡ä»¶ä¸‹è½½å’Œåˆ†å‘ã€‚

## ç‰¹æ€§

- ğŸ–¼ï¸ æ”¯æŒå…¨æ™¯å›¾ç‰‡æŸ¥çœ‹
- ğŸ“ æ‹–æ‹½ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶
- ğŸ’¾ å•æ–‡ä»¶HTMLä¸‹è½½ï¼ˆåŒ…å«å›¾ç‰‡æ•°æ®ï¼‰
- ğŸ”„ æ”¯æŒHTMLæ–‡ä»¶å¯¼å…¥ï¼ˆæ¢å¤ä¹‹å‰ä¿å­˜çš„çŠ¶æ€ï¼‰
- ğŸ¯ å³é”®èœå•åŠŸèƒ½
- ğŸ“± å“åº”å¼è®¾è®¡

## é¡¹ç›®ç»“æ„

```
cc-panoviewer/
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ index.html         # ä¸»HTMLæ–‡ä»¶
â”‚   â”œâ”€â”€ styles/            # æ ·å¼æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ main.css      # ä¸»æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ scripts/          # JavaScriptæ¨¡å—
â”‚       â”œâ”€â”€ main.js       # ä¸»å…¥å£æ–‡ä»¶
â”‚       â”œâ”€â”€ pannellum-loader.js    # PannellumåŠ è½½å™¨
â”‚       â”œâ”€â”€ event-handlers.js      # äº‹ä»¶å¤„ç†å™¨
â”‚       â”œâ”€â”€ viewer-manager.js      # æŸ¥çœ‹å™¨ç®¡ç†
â”‚       â”œâ”€â”€ context-menu.js        # å³é”®èœå•
â”‚       â””â”€â”€ file-handler.js        # æ–‡ä»¶å¤„ç†
â”œâ”€â”€ dist/                  # æ„å»ºè¾“å‡ºç›®å½•
â”œâ”€â”€ pannellum.css         # Pannellum CSSåº“
â”œâ”€â”€ pannellum.js          # Pannellum JSåº“
â”œâ”€â”€ package.json          # é¡¹ç›®é…ç½®
â”œâ”€â”€ vite.config.js        # Viteæ„å»ºé…ç½®
â””â”€â”€ README.md            # é¡¹ç›®è¯´æ˜
```

## å¼€å‘

### å®‰è£…ä¾èµ–

```bash
pnpm install
```

### å¼€å‘æ¨¡å¼

```bash
pnpm dev
```

### æ„å»º

#### æ­£å¸¸æ„å»ºï¼ˆåˆ†ç¦»æ–‡ä»¶ï¼‰
```bash
pnpm build
```

#### å•æ–‡ä»¶æ„å»ºï¼ˆå†…è”æ‰€æœ‰èµ„æºï¼‰
```bash
pnpm build:single
```

### é¢„è§ˆæ„å»ºç»“æœ

```bash
pnpm preview
```

## ä½¿ç”¨è¯´æ˜

1. **å¼€å‘æ¨¡å¼**: è¿è¡Œ `pnpm dev` å¯åŠ¨å¼€å‘æœåŠ¡å™¨
2. **å•æ–‡ä»¶æ„å»º**: è¿è¡Œ `pnpm build:single` ç”ŸæˆåŒ…å«æ‰€æœ‰èµ„æºçš„å•æ–‡ä»¶HTML
3. **æ­£å¸¸æ„å»º**: è¿è¡Œ `pnpm build` ç”Ÿæˆåˆ†ç¦»çš„æ–‡ä»¶ç»“æ„

## æ„å»ºæ¨¡å¼è¯´æ˜

### å¼€å‘æ¨¡å¼
- æ–‡ä»¶åˆ†ç¦»ï¼Œä¾¿äºå¼€å‘å’Œè°ƒè¯•
- æ”¯æŒçƒ­é‡è½½
- æ¨¡å—åŒ–ç»“æ„æ¸…æ™°

### å•æ–‡ä»¶æ¨¡å¼ï¼ˆç‰¹æ®Šå·¥ç¨‹åŒ–æ–¹æ¡ˆï¼‰
- æ‰€æœ‰ CSSã€JSã€Pannellum åº“æ–‡ä»¶ï¼ˆpannellum.jsã€pannellum.cssï¼‰å…¨éƒ¨**å†…è”**åˆ°æœ€ç»ˆçš„ HTML æ–‡ä»¶ä¸­
- dist ç›®å½•ä¸‹**åªä¿ç•™å”¯ä¸€ä¸€ä¸ª index.html æ–‡ä»¶**ï¼Œæ²¡æœ‰ä»»ä½•å¤–éƒ¨ä¾èµ–
- ç”Ÿæˆçš„ HTML æ–‡ä»¶å¯ç›´æ¥åˆ†å‘ã€ç¦»çº¿ä½¿ç”¨ï¼Œå®Œå…¨è‡ªåŒ…å«
- æ„å»ºæµç¨‹ç”± `vite.config.js` ä¸­è‡ªå®šä¹‰çš„ `inline-assets` æ’ä»¶å®ç°ï¼Œè‡ªåŠ¨ï¼š
  - æŸ¥æ‰¾å¹¶å†…è”æ‰€æœ‰æ„å»ºäº§ç‰©ï¼ˆmain.jsã€main.cssï¼‰
  - å†…è”æœ¬åœ°çš„ pannellum.js å’Œ pannellum.css
  - ç§»é™¤æ‰€æœ‰ `<script src=...>` å’Œ `<link href=...>` å¤–é“¾æ ‡ç­¾
  - æ„å»ºç»“æŸåè‡ªåŠ¨åˆ é™¤ dist ç›®å½•ä¸‹æ‰€æœ‰é index.html æ–‡ä»¶
- ä¾èµ– [cheerio](https://github.com/cheeriojs/cheerio) è¿›è¡Œ HTML è§£æå’Œ DOM æ“ä½œï¼Œç¡®ä¿å†…è”å¥å£®æ€§

#### å…¸å‹å•æ–‡ä»¶æ„å»ºæµç¨‹

```bash
pnpm build:single
# dist/index.html å³ä¸ºæœ€ç»ˆè‡ªåŒ…å«å•æ–‡ä»¶
```

## æŠ€æœ¯æ ˆ

- **æ„å»ºå·¥å…·**: Vite
- **å…¨æ™¯å›¾åº“**: Pannellum
- **æ¨¡å—åŒ–**: ES6 Modules
- **æ ·å¼**: CSS3

## è®¸å¯è¯

AGPL-3.0-or-later 